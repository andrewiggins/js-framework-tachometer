function t(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function e(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var n,o,l,s,r,i,a={},u=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function c(t,e){for(var n in e)t[n]=e[n];return t}function d(t){var e=t.parentNode;e&&e.removeChild(t)}function p(t,e,n){var o,l=arguments,s={};for(o in e)"key"!==o&&"ref"!==o&&(s[o]=e[o]);if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(l[o]);if(null!=n&&(s.children=n),"function"==typeof t&&null!=t.defaultProps)for(o in t.defaultProps)void 0===s[o]&&(s[o]=t.defaultProps[o]);return h(t,s,e&&e.key,e&&e.ref,null)}function h(t,e,o,l,s){var r={type:t,props:e,key:o,ref:l,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:s};return null==s&&(r.__v=r),n.vnode&&n.vnode(r),r}function f(t){return t.children}function m(t,e){this.props=t,this.context=e}function v(t,e){if(null==e)return t.__?v(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?v(t):null}function y(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return y(t)}}function b(t){(!t.__d&&(t.__d=!0)&&o.push(t)&&!l++||r!==n.debounceRendering)&&((r=n.debounceRendering)||s)(k)}function k(){for(var t;l=o.length;)t=o.sort((function(t,e){return t.__v.__b-e.__v.__b})),o=[],t.some((function(t){var e,n,o,l,s,r,i;t.__d&&(r=(s=(e=t).__v).__e,(i=e.__P)&&(n=[],(o=c({},s)).__v=o,l=S(i,s,o,e.__n,void 0!==i.ownerSVGElement,null,n,null==r?v(s):r),D(n,s),l!=r&&y(s)))}))}function g(t,e,n,o,l,s,r,i,_,c){var p,m,y,b,k,g,w,N,C,D=o&&o.__k||u,x=D.length;for(_==a&&(_=null!=r?r[0]:x?v(o,0):null),n.__k=[],p=0;p<e.length;p++)if(null!=(b=n.__k[p]=null==(b=e[p])||"boolean"==typeof b?null:"string"==typeof b||"number"==typeof b?h(null,b,null,null,b):Array.isArray(b)?h(f,{children:b},null,null,null):null!=b.__e||null!=b.__c?h(b.type,b.props,b.key,null,b.__v):b)){if(b.__=n,b.__b=n.__b+1,null===(y=D[p])||y&&b.key==y.key&&b.type===y.type)D[p]=void 0;else for(m=0;m<x;m++){if((y=D[m])&&b.key==y.key&&b.type===y.type){D[m]=void 0;break}y=null}if(k=S(t,b,y=y||a,l,s,r,i,_,c),(m=b.ref)&&y.ref!=m&&(N||(N=[]),y.ref&&N.push(y.ref,null,b),N.push(m,b.__c||k,b)),null!=k){if(null==w&&(w=k),C=void 0,void 0!==b.__d)C=b.__d,b.__d=void 0;else if(r==y||k!=_||null==k.parentNode){t:if(null==_||_.parentNode!==t)t.appendChild(k),C=null;else{for(g=_,m=0;(g=g.nextSibling)&&m<x;m+=2)if(g==k)break t;t.insertBefore(k,_),C=_}"option"==n.type&&(t.value="")}_=void 0!==C?C:k.nextSibling,"function"==typeof n.type&&(n.__d=_)}else _&&y.__e==_&&_.parentNode!=t&&(_=v(y))}if(n.__e=w,null!=r&&"function"!=typeof n.type)for(p=r.length;p--;)null!=r[p]&&d(r[p]);for(p=x;p--;)null!=D[p]&&L(D[p],D[p]);if(N)for(p=0;p<N.length;p++)P(N[p],N[++p],N[++p])}function w(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]="number"==typeof n&&!1===_.test(e)?n+"px":null==n?"":n}function N(t,e,n,o,l){var s,r,i,a,u;if(l?"className"===e&&(e="class"):"class"===e&&(e="className"),"style"===e)if(s=t.style,"string"==typeof n)s.cssText=n;else{if("string"==typeof o&&(s.cssText="",o=null),o)for(a in o)n&&a in n||w(s,a,"");if(n)for(u in n)o&&n[u]===o[u]||w(s,u,n[u])}else"o"===e[0]&&"n"===e[1]?(r=e!==(e=e.replace(/Capture$/,"")),i=e.toLowerCase(),e=(i in t?i:e).slice(2),n?(o||t.addEventListener(e,C,r),(t.l||(t.l={}))[e]=n):t.removeEventListener(e,C,r)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&!l&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,n))}function C(t){this.l[t.type](n.event?n.event(t):t)}function S(t,e,o,l,s,r,i,a,u){var _,d,p,h,v,y,b,k,w,N,C,S=e.type;if(void 0!==e.constructor)return null;(_=n.__b)&&_(e);try{t:if("function"==typeof S){if(k=e.props,w=(_=S.contextType)&&l[_.__c],N=_?w?w.props.value:_.__:l,o.__c?b=(d=e.__c=o.__c).__=d.__E:("prototype"in S&&S.prototype.render?e.__c=d=new S(k,N):(e.__c=d=new m(k,N),d.constructor=S,d.render=E),w&&w.sub(d),d.props=k,d.state||(d.state={}),d.context=N,d.__n=l,p=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=S.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=c({},d.__s)),c(d.__s,S.getDerivedStateFromProps(k,d.__s))),h=d.props,v=d.state,p)null==S.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==S.getDerivedStateFromProps&&k!==h&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(k,N),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(k,d.__s,N)||e.__v===o.__v){for(d.props=k,d.state=d.__s,e.__v!==o.__v&&(d.__d=!1),d.__v=e,e.__e=o.__e,e.__k=o.__k,d.__h.length&&i.push(d),_=0;_<e.__k.length;_++)e.__k[_]&&(e.__k[_].__=e);break t}null!=d.componentWillUpdate&&d.componentWillUpdate(k,d.__s,N),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(h,v,y)}))}d.context=N,d.props=k,d.state=d.__s,(_=n.__r)&&_(e),d.__d=!1,d.__v=e,d.__P=t,_=d.render(d.props,d.state,d.context),null!=d.getChildContext&&(l=c(c({},l),d.getChildContext())),p||null==d.getSnapshotBeforeUpdate||(y=d.getSnapshotBeforeUpdate(h,v)),C=null!=_&&_.type==f&&null==_.key?_.props.children:_,g(t,Array.isArray(C)?C:[C],e,o,l,s,r,i,a,u),d.base=e.__e,d.__h.length&&i.push(d),b&&(d.__E=d.__=null),d.__e=!1}else null==r&&e.__v===o.__v?(e.__k=o.__k,e.__e=o.__e):e.__e=x(o.__e,e,o,l,s,r,i,u);(_=n.diffed)&&_(e)}catch(t){e.__v=null,n.__e(t,e,o)}return e.__e}function D(t,e){n.__c&&n.__c(e,t),t.some((function(e){try{t=e.__h,e.__h=[],t.some((function(t){t.call(e)}))}catch(t){n.__e(t,e.__v)}}))}function x(t,e,n,o,l,s,r,i){var _,c,d,p,h,f=n.props,m=e.props;if(l="svg"===e.type||l,null!=s)for(_=0;_<s.length;_++)if(null!=(c=s[_])&&((null===e.type?3===c.nodeType:c.localName===e.type)||t==c)){t=c,s[_]=null;break}if(null==t){if(null===e.type)return document.createTextNode(m);t=l?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,m.is&&{is:m.is}),s=null,i=!1}if(null===e.type)f!==m&&t.data!=m&&(t.data=m);else{if(null!=s&&(s=u.slice.call(t.childNodes)),d=(f=n.props||a).dangerouslySetInnerHTML,p=m.dangerouslySetInnerHTML,!i){if(null!=s)for(f={},h=0;h<t.attributes.length;h++)f[t.attributes[h].name]=t.attributes[h].value;(p||d)&&(p&&d&&p.__html==d.__html||(t.innerHTML=p&&p.__html||""))}(function(t,e,n,o,l){var s;for(s in n)"children"===s||"key"===s||s in e||N(t,s,null,n[s],o);for(s in e)l&&"function"!=typeof e[s]||"children"===s||"key"===s||"value"===s||"checked"===s||n[s]===e[s]||N(t,s,e[s],n[s],o)})(t,m,f,l,i),p?e.__k=[]:(_=e.props.children,g(t,Array.isArray(_)?_:[_],e,n,o,"foreignObject"!==e.type&&l,s,r,a,i)),i||("value"in m&&void 0!==(_=m.value)&&_!==t.value&&N(t,"value",_,f.value,!1),"checked"in m&&void 0!==(_=m.checked)&&_!==t.checked&&N(t,"checked",_,f.checked,!1))}return t}function P(t,e,o){try{"function"==typeof t?t(e):t.current=e}catch(t){n.__e(t,o)}}function L(t,e,o){var l,s,r;if(n.unmount&&n.unmount(t),(l=t.ref)&&(l.current&&l.current!==t.__e||P(l,null,e)),o||"function"==typeof t.type||(o=null!=(s=t.__e)),t.__e=t.__d=void 0,null!=(l=t.__c)){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(t){n.__e(t,e)}l.base=l.__P=null}if(l=t.__k)for(r=0;r<l.length;r++)l[r]&&L(l[r],e,o);null!=s&&d(s)}function E(t,e,n){return this.constructor(t,n)}n={__e:function(t,e){for(var n,o;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(o=!0,n.setState(n.constructor.getDerivedStateFromError(t))),null!=n.componentDidCatch&&(o=!0,n.componentDidCatch(t)),o)return b(n.__E=n)}catch(e){t=e}throw t}},m.prototype.setState=function(t,e){var n;n=this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof t&&(t=t(n,this.props)),t&&c(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),b(this))},m.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),b(this))},m.prototype.render=f,o=[],l=0,s="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,i=a;var U=function(n){function o(t){var o;return(o=n.call(this,t)||this).onDelete=o.onDelete.bind(e(o)),o.onClick=o.onClick.bind(e(o)),o}t(o,n);var l=o.prototype;return l.shouldComponentUpdate=function(t,e){return t.data!==this.props.data||t.styleClass!==this.props.styleClass},l.onDelete=function(){this.props.onDelete(this.props.data.id)},l.onClick=function(){this.props.onClick(this.props.data.id)},l.render=function(){var t=this.props,e=t.styleClass,n=(t.onClick,t.onDelete,t.data);return p("tr",{className:e},p("td",{className:"col-md-1"},n.id),p("td",{className:"col-md-4"},p("a",{onClick:this.onClick},n.label)),p("td",{className:"col-md-1"},p("a",{onClick:this.onDelete},p("span",{className:"glyphicon glyphicon-remove","aria-hidden":"true"}))),p("td",{className:"col-md-6"}))},o}(m);function R(t){return Math.round(1e3*Math.random())%t}var A=function(){function t(){this.data=[],this.selected=void 0,this.id=1}var e=t.prototype;return e.buildData=function(t){void 0===t&&(t=1e3);for(var e=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],n=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],o=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],l=[],s=0;s<t;s++)l.push({id:this.id++,label:e[R(e.length)]+" "+n[R(n.length)]+" "+o[R(o.length)]});return l},e.updateData=function(t){for(var e=0;e<this.data.length;e+=10)this.data[e]=Object.assign({},this.data[e],{label:this.data[e].label+" !!!"})},e.delete=function(t){var e=this.data.findIndex((function(e){return e.id===t}));this.data.splice(e,1)},e.run=function(){this.data=this.buildData(),this.selected=void 0},e.add=function(){this.data=this.data.concat(this.buildData(1e3))},e.update=function(){this.updateData()},e.select=function(t){this.selected=t},e.runLots=function(){this.data=this.buildData(1e4),this.selected=void 0},e.clear=function(){this.data=[],this.selected=void 0},e.swapRows=function(){if(this.data.length>998){var t=this.data[1];this.data[1]=this.data[998],this.data[998]=t}},t}(),M=function(n){function o(t){var o;return(o=n.call(this,t)||this).state={store:new A},o.select=o.select.bind(e(o)),o.delete=o.delete.bind(e(o)),o.add=o.add.bind(e(o)),o.run=o.run.bind(e(o)),o.update=o.update.bind(e(o)),o.runLots=o.runLots.bind(e(o)),o.clear=o.clear.bind(e(o)),o.swapRows=o.swapRows.bind(e(o)),o.start=0,o.length=0,window.app=e(o),o}t(o,n);var l=o.prototype;return l.run=function(){this.state.store.run(),this.setState({store:this.state.store})},l.add=function(){this.state.store.add(),this.setState({store:this.state.store})},l.update=function(){this.state.store.update(),this.setState({store:this.state.store})},l.select=function(t){this.state.store.select(t),this.setState({store:this.state.store})},l.delete=function(t){this.state.store.delete(t),this.setState({store:this.state.store})},l.runLots=function(){this.state.store.runLots(),this.setState({store:this.state.store})},l.clear=function(){this.state.store.clear(),this.setState({store:this.state.store})},l.swapRows=function(){this.state.store.swapRows(),this.setState({store:this.state.store})},l.render=function(){var t=this,e=this.state.store.data.map((function(e,n){return p(U,{key:e.id,data:e,onClick:t.select,onDelete:t.delete,styleClass:e.id===t.state.store.selected?"danger":""})}));return p("div",{className:"container"},p("div",{className:"jumbotron"},p("div",{className:"row"},p("div",{className:"col-md-6"},p("h1",null,"preact")),p("div",{className:"col-md-6"},p("div",{className:"row"},p("div",{className:"col-sm-6 smallpad"},p("button",{type:"button",className:"btn btn-primary btn-block",id:"run",onClick:this.run},"Create 1,000 rows")),p("div",{className:"col-sm-6 smallpad"},p("button",{type:"button",className:"btn btn-primary btn-block",id:"runlots",onClick:this.runLots},"Create 10,000 rows")),p("div",{className:"col-sm-6 smallpad"},p("button",{type:"button",className:"btn btn-primary btn-block",id:"add",onClick:this.add},"Append 1,000 rows")),p("div",{className:"col-sm-6 smallpad"},p("button",{type:"button",className:"btn btn-primary btn-block",id:"update",onClick:this.update},"Update every 10th row")),p("div",{className:"col-sm-6 smallpad"},p("button",{type:"button",className:"btn btn-primary btn-block",id:"clear",onClick:this.clear},"Clear")),p("div",{className:"col-sm-6 smallpad"},p("button",{type:"button",className:"btn btn-primary btn-block",id:"swaprows",onClick:this.swapRows},"Swap Rows")))))),p("table",{className:"table table-hover table-striped test-data"},p("tbody",null,e)),p("span",{className:"preloadicon glyphicon glyphicon-remove","aria-hidden":"true"}))},o}(m);!function(t,e,o){var l,s,r;n.__&&n.__(t,e),s=(l=o===i)?null:o&&o.__k||e.__k,t=p(f,null,[t]),r=[],S(e,(l?e:o||e).__k=t,s||a,a,void 0!==e.ownerSVGElement,o&&!l?[o]:s?null:e.childNodes.length?u.slice.call(e.childNodes):null,r,o||a,l),D(r,t)}(p(M,null),document.getElementById("main"));export{M as Main};